eval(decodeURIComponent(escape(atob("ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIGZ1bmN0aW9uKCkgewogICAgICAgIC8vIFNldCB0b2RheSdzIGRhdGUgYXMgZGVmYXVsdAogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0YW5nZ2FsIikudmFsdWUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoIlQiKVswXTsKICAgICAgICAKICAgICAgICAvLyBSZWFsLXRpbWUgQ2xvY2sKICAgICAgICBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJyZWFsVGltZSIpLnRleHRDb250ZW50ID0gYFdha3R1OiAke25vdy50b0xvY2FsZVRpbWVTdHJpbmcoJ2lkLUlEJyl9YDsKICAgICAgICB9LCAxMDAwKTsKICAgICAgICAKICAgICAgICAvLyBMb2FkIHNhdmVkIGRhdGEKICAgICAgICBjb25zdCBzYXZlZERhdGEgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJvbXNldERhdGEiKSk7CiAgICAgICAgaWYgKHNhdmVkRGF0YSkgewogICAgICAgICAgICBPYmplY3Qua2V5cyhzYXZlZERhdGEpLmZvckVhY2goaWQgPT4gewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLnZhbHVlID0gc2F2ZWREYXRhW2lkXTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhbGN1bGF0ZVRvdGFscygpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBGb3JtYXQgY3VycmVuY3kKICAgICAgICBmdW5jdGlvbiBmb3JtYXRDdXJyZW5jeSh2YWx1ZSkgewogICAgICAgICAgICByZXR1cm4gJ1JwICcgKyBOdW1iZXIodmFsdWUpLnRvTG9jYWxlU3RyaW5nKCJpZC1JRCIpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBDYWxjdWxhdGUgdG90YWxzIGFuZCB1cGRhdGUgZmllbGRzCiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlVG90YWxzKCkgewogICAgICAgICAgICBsZXQgb21zZXRCZXJzaWggPSBOdW1iZXIoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm9tc2V0QmVyc2loIikudmFsdWUucmVwbGFjZSgvW15cZF0vZywgIiIpKTsKICAgICAgICAgICAgbGV0IHBhamFrID0gTnVtYmVyKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwYWphayIpLnZhbHVlLnJlcGxhY2UoL1teXGRdL2csICIiKSk7CiAgICAgICAgICAgIGxldCB0b3RhbFBlbmdlbHVhcmFuID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIiNvbmxpbmVMaXN0IC5jdXJyZW5jeS1pbnB1dCwgI29mZmxpbmVMaXN0IC5jdXJyZW5jeS1pbnB1dCIpXQogICAgICAgICAgICAgICAgLnJlZHVjZSgoc3VtLCBpbnB1dCkgPT4gc3VtICsgTnVtYmVyKGlucHV0LnZhbHVlLnJlcGxhY2UoL1teXGRdL2csICIiKSksIDApOwogICAgICAgICAgICBsZXQgc2lzYU9tc2V0ID0gb21zZXRCZXJzaWggLSB0b3RhbFBlbmdlbHVhcmFuOwogICAgICAgICAgICBsZXQgb21zZXRQbHVzID0gc2lzYU9tc2V0ICsgcGFqYWs7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJvbXNldEtvdG9yIikudmFsdWUgPSBmb3JtYXRDdXJyZW5jeShvbXNldEJlcnNpaCArIHBhamFrKTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInRvdGFsUGVuZ2VsdWFyYW4iKS52YWx1ZSA9IGZvcm1hdEN1cnJlbmN5KHRvdGFsUGVuZ2VsdWFyYW4pOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2lzYU9tc2V0IikudmFsdWUgPSBmb3JtYXRDdXJyZW5jeShzaXNhT21zZXQpOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgib21zZXRQbHVzIikudmFsdWUgPSBmb3JtYXRDdXJyZW5jeShvbXNldFBsdXMpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gU2F2ZSBkYXRhIHRvIGxvY2FsIHN0b3JhZ2UKICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSB7fTsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiI29tc2V0Rm9ybSAuY3VycmVuY3ktaW5wdXQsICN0YW5nZ2FsLCAjc2hpZnQiKS5mb3JFYWNoKGlucHV0ID0+IHsKICAgICAgICAgICAgICAgIGZvcm1EYXRhW2lucHV0LmlkXSA9IGlucHV0LnZhbHVlOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm9tc2V0RGF0YSIsIEpTT04uc3RyaW5naWZ5KGZvcm1EYXRhKSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIEF0dGFjaCBldmVudCBsaXN0ZW5lciBmb3IgY3VycmVuY3kgaW5wdXQKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuY3VycmVuY3ktaW5wdXQiKS5mb3JFYWNoKGlucHV0ID0+IHsKICAgICAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLCAoKSA9PiB7CiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IGZvcm1hdEN1cnJlbmN5KGlucHV0LnZhbHVlLnJlcGxhY2UoL1teXGRdL2csICIiKSk7CiAgICAgICAgICAgICAgICBjYWxjdWxhdGVUb3RhbHMoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgCiAgICAgICAgLy8gUmVzZXQgYnV0dG9uCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJlc2V0QnRuIikuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYgKGNvbmZpcm0oIkFwYWthaCBBbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBzZW11YSBkYXRhPyIpKSB7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgib21zZXREYXRhIik7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgib21zZXRGb3JtIikucmVzZXQoKTsKICAgICAgICAgICAgICAgIGNhbGN1bGF0ZVRvdGFscygpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgCiAgICAgICAgLy8gU2VuZCBXaGF0c0FwcCBidXR0b24KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2VuZEJ0biIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIC8vIEFtYmlsIG5pbGFpIGlucHV0CiAgICAgICAgICAgIGxldCB0YW5nZ2FsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInRhbmdnYWwiKS52YWx1ZTsKICAgICAgICAgICAgbGV0IHNoaWZ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNoaWZ0IikudmFsdWU7CiAgICAgICAgICAgIGxldCBvbXNldEtvdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm9tc2V0S290b3IiKS52YWx1ZTsKICAgICAgICAgICAgbGV0IGdvRm9vZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJnb2Zvb2QiKS52YWx1ZSB8fCAwOwogICAgICAgICAgICBsZXQgZ3JhYkZvb2QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZ3JhYmZvb2QiKS52YWx1ZSB8fCAwOwogICAgICAgICAgICBsZXQgc2hvcGVlRm9vZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzaG9wZWVmb29kIikudmFsdWUgfHwgMDsKICAgICAgICAgICAgbGV0IHFyaXNNYW5kaXJpID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInFyaXNNYW5kaXJpIikudmFsdWUgfHwgMDsKICAgICAgICAgICAgbGV0IHFyaXNCcmkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicXJpc0JyaSIpLnZhbHVlIHx8IDA7CiAgICAgICAgICAgIGxldCBkZWJpdE1hbmRpcmkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZGViaXRNYW5kaXJpIikudmFsdWUgfHwgMDsKICAgICAgICAgICAgbGV0IGRlYml0QnJpID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRlYml0QnJpIikudmFsdWUgfHwgMDsKICAgICAgICAgICAgbGV0IHRvdGFsUGVuZ2VsdWFyYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidG90YWxQZW5nZWx1YXJhbiIpLnZhbHVlIHx8IDA7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBIaXR1bmcgdG90YWwKICAgICAgICAgICAgbGV0IHRvdGFsID0gcGFyc2VGbG9hdChnb0Zvb2QpICsgcGFyc2VGbG9hdChncmFiRm9vZCkgKyBwYXJzZUZsb2F0KHNob3BlZUZvb2QpICsgcGFyc2VGbG9hdChxcmlzTWFuZGlyaSkgKyBwYXJzZUZsb2F0KHFyaXNCcmkpICsgcGFyc2VGbG9hdChkZWJpdE1hbmRpcmkpICsgcGFyc2VGbG9hdChkZWJpdEJyaSk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBGb3JtYXQgcGVzYW4KICAgICAgICAgICBsZXQgbWVzc2FnZSA9IGDilZTilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZdcbmAgKwogYOKVkSAqVGFuZ2dhbCAgICAgICAgIDogJHt0YW5nZ2FsfSpcbmAgKwogYOKVkSAqU2hpZnQgICAgICAgICAgICAgIDogJHtzaGlmdH0qXG5gICsKIGDilZEgKk9tc2V0ICAgICAgICAgICA6ICR7b21zZXRLb3Rvcn0qXG5gICsKIGDilaDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilaNcbmAgKwogYOKVoOKeoiBcYFxgXGBHb0Zvb2QgICAgICAgIDogJHtnb0Zvb2R9IFxgXGBcYCBcbmAgKwogYOKVoOKeoiBcYFxgXGBHcmFiRm9vZCAgICAgIDogJHtncmFiRm9vZH0gXGBcYFxgIFxuYCArCiBg4pWg4p6iIFxgXGBcYFNob3BlZUZvb2QgICAgOiAke3Nob3BlZUZvb2R9IFxgXGBcYCBcbmAgKwogYOKVoOKeoiBcYFxgXGBRcmlzIE1hbmRpcmkgIDogJHtxcmlzTWFuZGlyaX0gXGBcYFxgIFxuYCArCiBg4pWg4p6iIFxgXGBcYFFyaXMgQnJpICAgICAgOiAke3FyaXNCcml9IFxgXGBcYCBcbmAgKwogYOKVoOKeoiBcYFxgXGBEZWJpdCBNYW5kaXJpIDogJHtkZWJpdE1hbmRpcml9IFxgXGBcYCBcbmAgKwogYOKVoOKeoiBcYFxgXGBEZWJpdCBCcmkgICAgIDogJHtkZWJpdEJyaX0gXGBcYFxgIFxuYCArCiBg4pWg4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWjXG5gICsKIGDilZEgKkp1bWxhaCAgICAgICAgICA6ICR7dG90YWxQZW5nZWx1YXJhbn0qXG5gICsKIGDilaDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilaNcbmAgKwogYOKVkSAgICAgICAgICAgICAgICAgICDhtpzhtZLhtZbKuMqz4oGx4bWNyrDhtZcgwqnhtYPhtY3igbbigbTigbTigbbCslxuYCArCiBg4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdYDsKCgogICAgICAgICAgICAvLyBCdWthIFdoYXRzQXBwIGRlbmdhbiBwZXNhbiB5YW5nIGRpZm9ybWF0CiAgICAgICAgICAgIHdpbmRvdy5vcGVuKGBodHRwczovL3dhLm1lLz90ZXh0PSR7ZW5jb2RlVVJJQ29tcG9uZW50KG1lc3NhZ2UpfWAsICJfYmxhbmsiKTsKICAgICAgICB9KTsKICAgIH0pOwogICAgCiAgICAvLyBUb2dnbGUgY29sbGFwc2UgZm9yIGFjY29yZGlvbnMKICAgIGZ1bmN0aW9uIHRvZ2dsZUNvbGxhcHNlKGlkKSB7CiAgICAgICAgJCgnIycgKyBpZCkuY29sbGFwc2UoJ3RvZ2dsZScpOwogICAgfQogICAgCiAgICAvLyBNZW11dGFyIGF1ZGlvIG90b21hdGlzIHNhYXQgd2Vic2l0ZSB0ZXJidWthCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIiwgZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgdmFyIGF1ZGlvID0gbmV3IEF1ZGlvKCdodHRwczovL2dpdGh1Yi5jb20vQWd1czM4L0F1ZGlvL3Jhdy9tYWluL0RKJTIwS0FOQVNISU1JLm1wMycpOwogICAgICBhdWRpby5wbGF5KCk7CiAgICB9KTsKICAgIAogICAgCiAgICAKICAgICAgICBsZXQgY3VycmVudFBsYXlpbmcgPSBudWxsOyAvLyBNZW55aW1wYW4gSUQgdG9tYm9sIHlhbmcgc2VkYW5nIGRpcHV0YXIKCiAgICBmdW5jdGlvbiB0b2dnbGVBdWRpb0xpc3QoKSB7CiAgICAgIGNvbnN0IGF1ZGlvTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb0xpc3QnKTsKICAgICAgaWYgKGF1ZGlvTGlzdC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgfHwgYXVkaW9MaXN0LnN0eWxlLmRpc3BsYXkgPT09ICcnKSB7CiAgICAgICAgYXVkaW9MaXN0LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgIGF1ZGlvTGlzdC5zdHlsZS5tYXhIZWlnaHQgPSBhdWRpb0xpc3Quc2Nyb2xsSGVpZ2h0ICsgInB4IjsKICAgICAgfSBlbHNlIHsKICAgICAgICBhdWRpb0xpc3Quc3R5bGUubWF4SGVpZ2h0ID0gJzAnOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgYXVkaW9MaXN0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgfSwgNTAwKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHBsYXlQYXVzZUF1ZGlvKHNyYywgYnRuSWQpIHsKICAgICAgY29uc3QgYXVkaW9QbGF5ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9QbGF5ZXInKTsKICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYnRuSWQpOwoKICAgICAgLy8gSmlrYSB0b21ib2wgeWFuZyBzYW1hIGRpa2xpawogICAgICBpZiAoY3VycmVudFBsYXlpbmcgPT09IGJ0bklkKSB7CiAgICAgICAgaWYgKCFhdWRpb1BsYXllci5wYXVzZWQpIHsKICAgICAgICAgIGF1ZGlvUGxheWVyLnBhdXNlKCk7CiAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gJzxpIGNsYXNzPSJmYXMgZmEtcGxheSI+PC9pPic7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGF1ZGlvUGxheWVyLnBsYXkoKTsKICAgICAgICAgIGJ1dHRvbi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhcyBmYS1wYXVzZSI+PC9pPic7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8gSmlrYSBhdWRpbyBiYXJ1IGRpbWFpbmthbgogICAgICBpZiAoY3VycmVudFBsYXlpbmcpIHsKICAgICAgICBjb25zdCBwcmV2QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY3VycmVudFBsYXlpbmcpOwogICAgICAgIHByZXZCdXR0b24uaW5uZXJIVE1MID0gJzxpIGNsYXNzPSJmYXMgZmEtcGxheSI+PC9pPic7CiAgICAgIH0KCiAgICAgIGN1cnJlbnRQbGF5aW5nID0gYnRuSWQ7CiAgICAgIGF1ZGlvUGxheWVyLnNyYyA9IHNyYzsKICAgICAgYXVkaW9QbGF5ZXIucGxheSgpOwogICAgICBidXR0b24uaW5uZXJIVE1MID0gJzxpIGNsYXNzPSJmYXMgZmEtcGF1c2UiPjwvaT4nOwogICAgfQ=="))));
